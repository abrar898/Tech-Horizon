{% extends "base.html" %}

{% block title %}Payment Successful - LearnHub{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="text-center py-5">
                <div class="mb-4">
                    <i class="fas fa-check-circle fa-5x text-success"></i>
                </div>
                
                <h1 class="fw-bold text-success mb-3">Payment Successful!</h1>
                <p class="lead text-muted mb-4">
                    Thank you for your purchase. You have successfully enrolled in the course.
                </p>
                
                <div class="card border-success mb-4">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-center mb-3">
                            <i class="fas fa-graduation-cap fa-2x text-success me-3"></i>
                            <div>
                                <h5 class="card-title mb-0">Course Access Granted</h5>
                                <small class="text-muted">You can now access all course materials</small>
                            </div>
                        </div>
                        
                        <div class="row text-center g-3">
                            <div class="col-4">
                                <div class="border-end">
                                    <i class="fas fa-video text-primary d-block mb-1"></i>
                                    <small class="text-muted">Videos</small>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="border-end">
                                    <i class="fas fa-quiz text-warning d-block mb-1"></i>
                                    <small class="text-muted">Quizzes</small>
                                </div>
                            </div>
                            <div class="col-4">
                                <i class="fas fa-certificate text-success d-block mb-1"></i>
                                <small class="text-muted">Certificate</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>What's next?</strong> Start learning immediately by accessing your course materials below.
                </div>
                
                <div class="d-flex gap-3 justify-content-center">
                    {% if course_id %}
                        <a href="{{ url_for('course_detail', course_id=course_id) }}" class="btn btn-success btn-lg">
                            <i class="fas fa-play-circle me-2"></i>Start Learning
                        </a>
                    {% endif %}
                    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-tachometer-alt me-2"></i>Go to Dashboard
                        </a>
                </div>
                
                <div class="mt-4">
                    <small class="text-muted">
                        <i class="fas fa-envelope me-1"></i>
                        A confirmation email has been sent to your registered email address.
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Confetti Animation -->
<div class="position-fixed top-0 start-0 w-100 h-100 pointer-events-none" id="confetti-container" style="z-index: 9999;"></div>
{% endblock %}

{% block scripts %}
<script>
// Simple confetti animation
function createConfetti() {
    const container = document.getElementById('confetti-container');
    const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd'];
    
    for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.style.position = 'absolute';
        confetti.style.width = '10px';
        confetti.style.height = '10px';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.top = '-10px';
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        confetti.style.opacity = '0.8';
        confetti.style.animation = `confettiFall ${2 + Math.random() * 3}s linear forwards`;
        
        container.appendChild(confetti);
        
        // Remove confetti after animation
        setTimeout(() => {
            if (confetti.parentNode) {
                confetti.parentNode.removeChild(confetti);
            }
        }, 5000);
    }
}

// Add CSS for confetti animation
const style = document.createElement('style');
style.textContent = `
    @keyframes confettiFall {
        0% {
            transform: translateY(-10px) rotate(0deg);
            opacity: 1;
        }
        100% {
            transform: translateY(calc(100vh + 10px)) rotate(360deg);
            opacity: 0;
        }
    }
    .pointer-events-none {
        pointer-events: none;
    }
`;
document.head.appendChild(style);

// Trigger confetti on page load
document.addEventListener('DOMContentLoaded', function() {
    createConfetti();
    
    // Create more confetti after a delay
    setTimeout(createConfetti, 1000);
});
</script>
{% endblock %}
